<div class="mainContent">
<div class="panel panel-default">  
  <div class="panel-heading" >  
      <h1 style="text-align:center;margin-top: 50px;font-size:xx-large;color: #379683;">LIST OF BIILS</h1><br>  
                   
    </div> 

    

<div style="float: right;padding-right:10px;margin-bottom:40px;"> 
   <input type="date" style="padding:5px;width:50%;margin-right: 5px;color: #379683;" name="date" [(ngModel)]="reportDate" required>
   
  <button [disabled]="!reportDate"class='btn btn-info' style="width:150px;background-color: #379683;border-color:#379683 ;border: 1px;" type="submit" (click)="generateReport()"   (click)="openDialog()"> Generate report</button> 
</div> 
  
<div style="float: left;padding-right:1px;margin-bottom:40px;">
  <input  type="number"    style="padding:5px;width:49%;margin-right:5px;" name="presid" [(ngModel)]="presID" required> 
  
    <button [disabled]="!presID" (click) ="getbildeatils()" (click)="openDialogbill()" public (click)="createbill()"     style="width:150px;padding-right:2 ;background-color: #379683;border-color:#379683 ;border: 1px;"   class='btn btn-info'> generate bill </button>
  </div>



<!--<div >
  <input style="align-self:center; text-align: center; width:20%;margin-left:100px;height:35px;margin-bottom: 40px;color: #379683;" type="text" [(ngModel)]="searchText"  placeholder="Search by Payment_ID" class="advancedSearchTextbox">

</div> --> 
<div  class="panel-body" >
  <table  datatable  id="tablebill"  class="myTable"  style=" color: #379683;"   class="table table-hover table-sm"  [dtOptions]="dtOptions"
  [dtTrigger]="dtTrigger" > 
    <thead class="thead-light">
      <tr>
      <th style="padding-left:50px;color: #379683;">Payment_ID</th>  
      
      <th style="color: #379683;" >Total Amount(RS.) </th>
      <th  style="color: #379683;">Payment_Date</th>
      <th  style="color: #379683;">Payment_status(YES/NO)</th>
      <th style="color: #379683;">Printing_status</th>
      <th> </th>
    </tr>  
    </thead>
    <tbody>
    <tr  *ngFor= "let Bill of bill"   > 
      <td style="padding-left:55px;">{{Bill.billid}}</td>   
      <td>{{Bill.tamount}}.00</td>
      <td>{{Bill.pdate}}</td>
      <td style="padding-left:50px ;">{{Bill.payments}}</td>
      <td>{{Bill.printings}}</td> 
      <td><button  (click)="this.isButtonVisible = false" ng-model="myVar" style="background-color: #379683;border-color:#379683 ;border: 1px;"  (click)="deletebill(Bill.billid); " class='btn btn-info' (click)="this.isButtonVisible = false" >delete</button>   
    </tr>  
    </tbody>  
    
</table> 


</div>
</div>
</div>






















<div class="backShader" [style.display]="isVisible ? 'block' : 'none'" >
 
  <div class="PatDetail">

    <div id="contentToConvert">
      <div style="width: 100%;">
      <h2 style="color: #379683;margin-top:30px;">Purchased bill details for {{reportDate}}</h2>
      <table id="tblre" style=" color: #379683;"class="myTable"class="table table-hover table-sm" datatable >
      
          <thead class="thead-light"> <tr>
            <th style="color: #379683;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;" >Payment_ID</th>  
            <th style="color: #379683;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">Total Amount(RS.) </th>
            <th style="color: #379683;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">Payment_Date</th>
            <th style="color: #379683;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;" >Payment_status</th>
            <th style="color: #379683;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">Printing_status</th>
          </tr>
          </thead>
           
          <tbody>
              <tr *ngFor="let Bill of billr" >
              <td >{{Bill.billid}}</td>   
              <td>{{Bill.tamount}}</td>
              <td>{{Bill.pdate}}</td>
              <td >{{Bill.payments}}</td>
              <td>{{Bill.printings}}</td>
              </tr>
          </tbody>
         </table>
        </div>
      </div>  


      <button  style="margin-right:150px ;background-color: #379683;border-color:#379683 ;border: 1px;"  (click)="generatePDF()" class='btn btn-info'>Print</button> 
      <button (click)="closeDetail()" style="margin-left:270px;background-color: #379683;border-color:#379683 ;border: 1px;" class='btn btn-info'>close</button>  
    

    <!--<h3>Choose a date for generate report</h3> (click)="closeDetail()"
      <input type="date" style="padding:10px;width:100%;" name="date" [(ngModel)]="reportDate" required>
      <input type="submit" value="OK" class='btn btn-info'style="float:right;margin-top:10px; padding:10px; width:100px;" (click)="generateReport()">
    -->
  </div>
</div>



































<div class="backShader_gb" [style.display]="isDisplay ? 'block' : 'none'"  >
 
  <div class="PatDetail_gb"  >
    
    <div id="content"  >
      <div class="top" style="color: #379683;"> 
      <button (click)="closebiidialog()" style="font-size: 15px;" >X</button>  
      <h5 style="float:right;padding-right:20px;">  Bill-Number-B11{{presID}} </h5> <br>
      <div style="padding-right:0px;margin-top: 10px;">
       
    
      
      
      </div>
      
      </div>
      
      
      <div *ngFor="let prescription of prescription" >
      <div style="float:right; z-index: 4;margin-top:80px;margin-bottom:0px;color: #379683;padding-right:150px; "  >
       
        <h5 >Customer details:</h5>
        <h6>Name       :{{prescription.patientName}} </h6>
        <h6>Age        :{{prescription.patientAge}} </h6>
        <h6>Patient ID : patient{{prescription.patientId}}</h6>
      
       </div>
      
       <div style="float:left;width:50%; z-index: 4;margin-top: 80px;margin-bottom: 50px;padding-left:50px;color: #379683;">
        <h5 >Doctor details:</h5>
        <h6>Doctor_Id          : {{prescription.doctorID}}</h6>
        <h6>Doctor's charge : rs. {{prescription.docFee}}.00</h6>
       </div>
      </div>
      
      
       <div style="align-content: center; z-index: 4;width: 80%;position:relative;padding-top:150px;padding-bottom:50px;margin-top:50px;margin-left:50px;margin-right:15px;color: #379683;">
       <table id="tbldr" class="tbl" class="table table-sm" >
        <thead class="thead-light">
          <th style="color: #379683;">Drug Name</th>
          <th style="color: #379683;">Drug Quantity</th>
          <th style="color: #379683;">price(LKR)</th>
        </thead>
      
        <tbody>
         <tr >
          <td></td>
          <td>pills</td>
          <td>  x  = .00</td>
          </tr>
          
        </tbody>
       </table>
       <h5 style="float:right;margin-right:50px;color: #379683;">Total price(LKR) = </h5> 
      </div>
      </div>
      
      
       <div style="margin-top:20px;margin-bottom:100px;color: #379683;">
       <div style="float:right;margin-right:30px;margin-bottom:50px;color: #379683;">

   
         <button   (click)="updatePayement(presID)" (click)="closebiidialog()" class='btn btn-info' style="float: right;margin-right:30px;background-color: #379683;border-color:#379683 ;border: 1px;" >Pay</button></div>
         <button (click)="updatePrintingstatus(presID)"  (click)="billgeneratePDF()" class='btn btn-info' style="background-color: #379683;border-color:#379683 ;border: 1px;float:left;margin-left:35px;"> print</button>
      </div>
  
  

  </div>
</div>












